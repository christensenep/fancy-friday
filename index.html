<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
<link rel="stylesheet" href="fancy-friday.css">
<title>Fancy Friday!</title>
<style>
footer {
  position: absolute;
  bottom: 0;
  right: 0;
  background: black;
  color: white;
  z-index: 1;
}
</style>
<footer>
  Score: <span id="score">0</span>
</footer>
<script src="fancy-friday.js"></script>
<script>
var MINIGAME_URLS = [
  "game-01.html"
];
var scoreEl = document.getElementById('score');
var currentMinigame = null;

// Returns a random integer between min and max
// Using Math.round() will give you a non-uniform distribution!
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}

function playAnotherMinigame() {
  var randomIndex = getRandomInt(0, MINIGAME_URLS.length - 1);
  var minigame = FancyFriday.Minigame(MINIGAME_URLS[randomIndex]);

  minigame.addEventListener("minigameready", function() {
    if (currentMinigame)
      currentMinigame.parentNode.removeChild(currentMinigame);
    currentMinigame = minigame;
    minigame.play();
  });
  minigame.addEventListener("minigameended", function() {
    scoreEl.textContent = parseFloat(scoreEl.textContent) + minigame.score;
    playAnotherMinigame();
  });
  document.body.appendChild(minigame);
};

window.addEventListener("load", playAnotherMinigame, false);
</script>
