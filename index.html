<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no">
<link rel="stylesheet" href="fancy-friday.css">
<title>Fancy Friday!</title>
<style>
footer {
  position: absolute;
  bottom: 0;
  right: 0;
  background: black;
  color: white;
  z-index: 1;
}
</style>
<footer>
  Score: <span id="score">0</span>
</footer>
<script src="fancy-friday.js"></script>
<script>
var MICROGAME_URLS = [
  "game-01.html"
];
var scoreEl = document.getElementById('score');
var currentMicrogame = null;

// Returns a random integer between min and max
// Using Math.round() will give you a non-uniform distribution!
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}

function playAnotherMicrogame() {
  var randomIndex = getRandomInt(0, MICROGAME_URLS.length - 1);
  var microgame = FancyFriday.Microgame(MICROGAME_URLS[randomIndex]);

  microgame.addEventListener("microgameready", function() {
    if (currentMicrogame)
      currentMicrogame.parentNode.removeChild(currentMicrogame);
    currentMicrogame = microgame;
    microgame.play();
  });
  microgame.addEventListener("microgameended", function() {
    scoreEl.textContent = parseFloat(scoreEl.textContent) + microgame.score;
    playAnotherMicrogame();
  });
  document.body.appendChild(microgame);
};

window.addEventListener("load", playAnotherMicrogame, false);
</script>
